<!--pages/order/order.wxml-->
<view class="page">
  <view class="page__bd">
    <view class="weui-cells weui-cells_after-title">
      <view class="weui-cell">
        <view class="weui-cell__hd" style="position: relative;margin-right: 10px;">
          <image src="{{uploadpath}}doctor/{{doctor.photo}}" style="width: 20vw; height: 20vw; display: block;border-radius:10vw;" />
        </view>
        <view class="weui-cell__bd">
          <view>{{doctor.name}}</view>
          <view style="font-size: 13px;color: #888888;">{{doctor.position}}</view>
          <view style="font-size: 13px;color: #888888;">{{doctor.qualification}}</view>
        </view>
      </view>
    </view>

    <view class="weui-cells__title">选择预约时间</view>
    <view class="weui-cells weui-cells_after-title" style='text-align:center;'>
      <view class="weui-flex">
        <view style='padding-left:5vw;padding-right:5vw;' bindtap='prevWeek'>
          <view class="placeholder">
            <text class='fa fa-angle-left'></text>
          </view>
        </view>
        <view class="weui-flex__item">
          <view class="placeholder">{{nowweekstr}}</view>
        </view>
        <view style='padding-left:5vw;padding-right:5vw;' bindtap='nextWeek'>
          <view class="placeholder">
            <text class='fa fa-angle-right'></text>
          </view>
        </view>
      </view>
      <view class="weui-flex timerow">
        <view class="weui-flex__item">
          <view class="placeholder"></view>
        </view>
        <view class="weui-flex__item">
          <view class="placeholder">一</view>
        </view>
        <view class="weui-flex__item">
          <view class="placeholder">二</view>
        </view>
        <view class="weui-flex__item">
          <view class="placeholder">三</view>
        </view>
        <view class="weui-flex__item">
          <view class="placeholder">四</view>
        </view>
        <view class="weui-flex__item">
          <view class="placeholder">五</view>
        </view>
        <view class="weui-flex__item">
          <view class="placeholder">六</view>
        </view>
        <view class="weui-flex__item">
          <view class="placeholder">日</view>
        </view>
      </view>
      <view wx:for="{{timetable}}" wx:for-item="table" wx:key="t" class="weui-flex timerow" style='font-size:60%;'>
        <view class="weui-flex__item timecell">
          <view class="placeholder">{{table.name}}</view>
        </view>
        <view wx:for="{{table.schedule}}" wx:for-item="schedule" wx:key="d" class="weui-flex__item timecell {{schedule.count<0?'gray':''}} {{schedule.count>=0?'white':''}} {{schedule.count>=1?'yellow':''}}  {{schedule.count>=3?'orange':''}} {{schedule.count>=5?'red':''}} {{dateinfo.date==schedule.date&&dateinfo.val==table.val?'selected':''}}"
          data-date="{{schedule.date}}" data-time="{{table.name}}" data-val="{{table.val}}" data-count="{{schedule.count}}" bindtap="selectDate">
          <view class="placeholder">{{schedule.count>0?schedule.count+"人":""}}</view>
        </view>
      </view>
    </view>

    <view class="weui-cells__title">确认信息</view>
    <view class="weui-cells weui-cells_after-title">
      <view class="weui-cell weui-cell_input"> 
        <view class="weui-cell__hd">
          <view class="weui-label">预约时间</view>
        </view>
        <view class="weui-cell__bd">
          <input class="weui-input" placeholder="请选择预约时间" disabled='disabled' value='{{dateinfo.date}}{{dateinfo!=undefined?" ":""}}{{dateinfo.time}}' />
        </view>
      </view>
      <view class="weui-cell">
        <view class="weui-cell__bd">
          <textarea class="weui-textarea" placeholder="详细补充你的求诊内容" style="height: 3.3em" bindinput="changeDescription" />
          <view class="weui-textarea-counter">{{description.length}}/200</view>
        </view>
      </view>
    </view>

  </view>
</view>